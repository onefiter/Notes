## TCP 和 UDP 有哪些区别？
一般面试的时候我问这两个协议的区别，大部分人会回答，TCP 是面向连接的，UDP 是面向无连接的。
什么叫面向连接，什么叫无连接呢？在互通之前，面向连接的协议会先建立连接。例如，TCP 会三次握手，而 UDP 不会。为什么要建立连接呢？你 TCP 三次握手，我 UDP 也可以发三个包玩玩，有什么区别吗？

**所谓的建立连接，是为了在客户端和服务端维护连接，而建立一定的数据结构来维护双方交互的状态，用这样的数据结构来保证所谓的面向连接的特性。**

**TCP 提供可靠交付，**通过 TCP 连接传输的数据，无差错、不丢失、不重复、并且按序到达。
**UDP 继承了 IP 包的特性，不保证不丢失，不保证按顺序到达。**
**TCP 是面向字节流的，UDP 继承了 IP 的特性，基于数据报的，一个一个地发，一个一个地收。**
**TCP 是可以有拥塞控制的。**它意识到包丢弃了或者网络的环境不好了，就会根据情况调整自己的行为，看看是不是发快了，要不要发慢点。**UDP 就不会，应用让我发，我就发，管它洪水滔天。**
**TCP 其实是一个有状态服务**，通俗地讲就是有脑子的，里面精确地记着发送了没有，接收到没有，发送到哪个了，应该接收哪个了，错一点儿都不行。而 **UDP 则是无状态服务。**通俗地说是没脑子的，天真无邪的，发出去就发出去了。



## UDP报文格式
![UDP报文格式](E:\workspace\Notes\assets\UDP报文格式.png)

## UDP特点

- 沟通简单
- 轻信他人
- 做事不懂权变：不会根据网络的情况进行包的拥塞控制，无论网络丢包成啥样，它该怎么发还怎么发
## UDP使用场景

- 需要资源少，在网络情况比较好的内网，或者对于丢包不敏感的应用
- **不需要一对一沟通，建立连接，而是可以广播的应用**。
- **需要处理速度快，时延低，可以容忍少数丢包，但是要求即便网络拥塞，也毫不退缩，一往无前的时候**。
> 对于多播，我们在讲 IP 地址的时候，讲过一个 D 类地址，也即组播地址，使用这个地址，可以将包组播给一批机器。当一台机器上的某个进程想监听某个组播地址的时候，需要发送 IGMP 包，所在网络的路由器就能收到这个包，知道有个机器上有个进程在监听这个组播地址。当路由器收到这个组播地址的时候，会将包转发给这台机器，这样就实现了跨路由器的组播。

## UDP扩展
基于UDP的QUIC（HTTP/3)

